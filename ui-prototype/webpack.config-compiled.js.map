{"version":3,"sources":["webpack.config.js"],"names":[],"mappings":"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","file":"webpack.config-compiled.js","sourcesContent":["'use strict';\r\n\r\nvar webpack             = require('webpack'),\r\n    HtmlWebpackPlugin   = require('html-webpack-plugin'),\r\n    path                = require('path'),\r\n    fs                  = require('fs'),\r\n    staticResourcePath  = path.join(__dirname, 'static'),\r\n    srcPath             = path.join(__dirname, 'src'),\r\n    nodeModulesPath     = path.join(__dirname, 'node_modules');\r\n\r\n/**\r\n *  检测Webpack 编译命令中是否带有 NODE_ENV=production 参数\r\n 带有 NODE_ENV=production 参数，意为：处于 发布环境 的编译；\r\n 不带有 NODE_ENV=production 参数，意为：处于 测试环境 的编译。\r\n *  @author James lv\r\n *  @creatdate 2015-10-28T14:41:59+0800\r\n *  @return    {Boolean} true : 发布环境\r\n false: 测试环境\r\n */\r\nvar isProduction = function () {\r\n    return process.env.NODE_ENV === 'production';\r\n};\r\n\r\n/**\r\n *  检查本地是否有 webpack.localconfig.js 文件\r\n *  @author James lv\r\n *  @creatdate 2015-10-28T16:46:58+0800\r\n *  @return    {Boolean} true : 存在webpack.localconfig.js 文件\r\n false: 不存在webpack.localconfig.js 文件\r\n */\r\nvar isExistsLocalconfig = function () {\r\n    return fs.existsSync(path.join(__dirname, 'webpack.localconfig.js'));\r\n};\r\n\r\n/**\r\n *  Project config\r\n 检查本地是否有 webpack.localconfig.js 文件，如果有，则使用localconfig 中的配置；\r\n 否则，则使用默认配置。\r\n *  @type {Object}\r\n */\r\nvar Config = isExistsLocalconfig() ?\r\n    require(path.join(__dirname, 'webpack.localconfig.js'))\r\n    : {\r\n    AjaxDomain: 'mobile.' + 'tonghs.me'//'angelcrunch.com'// tonghs.me\r\n};\r\n\r\n/**\r\n *  自定义环境变量plugin\r\n *  @type {\r\n *        __DEV__:      在module 中确定当前是否是测试环境；\r\n                        一般使用 [if(__DEV__) foo();] 的方式调用；\r\n                        在编译时，值为false 的无效if 语句，将被uglify插件擦除。\r\n *        __AjaxDomain: 在module 中确定当前环境的Ajax 路径；\r\n                        使用 ［var Domain = __AjaxDomain;］ 的方式调用。\r\n *  }\r\n */\r\nvar defineStatePlugin = new webpack.DefinePlugin({\r\n    __DEV__: JSON.stringify(JSON.parse(process.env.NODE_ENV === 'production' ? 'false' : 'true')),\r\n    __AjaxDomain: JSON.stringify(Config.AjaxDomain)\r\n});\r\n\r\n/**\r\n *  指定多个库的min package 路径；\r\n 在 发布环境 中，使用这些官方的发布环境库会去除掉 Warning 模块，\r\n 减小编译后的bundle 体积。（当前会减小40-60KB）\r\n *  @type {Object}\r\n */\r\nvar modulePath = { // production\r\n        React                       : path.join(nodeModulesPath, 'react/dist/react.min.js'),\r\n        React_addons                : path.join(nodeModulesPath, 'react/dist/react-with-addons.min.js'),\r\n        React_Router                : path.join(nodeModulesPath, 'react-router/umd/ReactRouter.min.js')\r\n    },\r\n\r\n    moduleAlias = isProduction() ?\r\n    { // production\r\n        'react/addons'                : [modulePath.React_addons],\r\n        'react'                       : [modulePath.React],\r\n        'react-router'                : [modulePath.React_Router],\r\n        // static resources\r\n        'static'                      : staticResourcePath\r\n    } :\r\n    {\r\n        // static resources\r\n        'static'                      : staticResourcePath\r\n    },\r\n\r\n    noParse = isProduction() ?\r\n        [modulePath.React,\r\n            modulePath.React_addons\r\n            // modulePath.React_Router   // *Note: You can't put 'modulePath.React_Router' to noParse\r\n        ] : [];\r\n\r\n\r\n/**\r\n *  Webpack compilation config\r\n *  @author James lv\r\n *  @creatdate 2015-10-28T14:59:40+0800\r\n *  @type {Object}\r\n */\r\nmodule.exports = {\r\n    target: 'web',\r\n    cache: true,\r\n    entry: {\r\n        module  : path.join(srcPath, 'module.js'),\r\n        common  : ['jquery', 'react', 'react-router', 'alt', 'react-mixin', 'utils/titleHelper']\r\n    },\r\n    /**\r\n     *  Webpack 解析bundle 中请求的module 路径时的设置\r\n     *  @type {Object}\r\n     */\r\n    resolve: {\r\n        root: srcPath,\r\n        extensions: ['', '.js'],\r\n        modulesDirectories: ['node_modules', 'src'],\r\n        alias: moduleAlias\r\n    },\r\n    /**\r\n     *  Webpack bundle 的输出设置\r\n     详情见于 https://webpack.github.io/docs/configuration.html#output-chunkfilename\r\n     *  @type {Object}\r\n     */\r\n    output: {\r\n        path: path.join(__dirname, 'tmp'),\r\n        publicPath: '/',\r\n        filename: 'app/[name].[chunkhash].js',\r\n        chunkFilename: 'modules/[name].[chunkhash].js',\r\n        library: ['Example', '[name]'],\r\n        pathInfo: true\r\n    },\r\n\r\n    /**\r\n     *  Webpack loaders\r\n     *  @type {Object}\r\n     */\r\n    module: {\r\n        loaders: [\r\n            { test: /\\.js?$/, exclude: /node_modules/, loader: 'babel?cacheDirectory' },\r\n            { test: /\\.styl$/, loader: 'style-loader!css-loader!stylus-loader' },\r\n            {\r\n                test: /\\.scss$/,\r\n                loaders: [\"style\", \"css\", \"sass\"]\r\n            },\r\n            { test: /\\.css$/, loader: 'style!css' },\r\n            {\r\n                test: /.*\\.(png|gif|svg)$/i,\r\n                loaders: [\r\n                    'file?hash=sha512&digest=hex&name=[hash].[ext]',\r\n                    'image-webpack?{progressive:true, optimizationLevel: 7, interlaced: false, pngquant:{quality: \"65-90\", speed: 4}}'\r\n                ]\r\n            },\r\n            {\r\n                test: /\\.(jpg)$/,\r\n                loader: 'url?limit=25000'\r\n            },\r\n            {\r\n                test: /\\.(woff|ttf)$/,\r\n                loader: 'url?limit=100000'\r\n            }\r\n        ],\r\n        noParse: noParse\r\n    },\r\n    /**\r\n     *  Config to node-sass\r\n     *  @type {Object}\r\n     */\r\n    sassLoader: {\r\n        includePaths: [path.resolve(__dirname, \"./static\")]\r\n    },\r\n\r\n    plugins: [\r\n        new webpack.optimize.CommonsChunkPlugin('common', 'common.js'),\r\n    /**\r\n     *  将bundle 注入到html 文件上的plugin\r\n     *  @type {Object}\r\n     */\r\n        new HtmlWebpackPlugin({\r\n            inject: true,\r\n            excludeChunks: ['test'],\r\n            template: 'src/index.html'\r\n        }),\r\n        new webpack.optimize.UglifyJsPlugin({\r\n            mangle: {\r\n                except: ['$super', '$', 'exports', 'require']\r\n            },\r\n            compress: {\r\n                warnings: false\r\n            }\r\n        }),\r\n        new webpack.NoErrorsPlugin(),\r\n    /**\r\n     *  调用自定义环境变量plugin\r\n     */\r\n        defineStatePlugin\r\n    ],\r\n    debug: isProduction() ? false : true,\r\n    devtool: isProduction() ? ''\r\n        : 'eval-cheap-module-source-map',\r\n    devServer: {\r\n        port: 9090,\r\n        contentBase: './tmp',\r\n        historyApiFallback: true\r\n    }\r\n};"]}